{%extends 'base/base.html'%}
{%load staticfiles%}
{% block extracss %}
<link href="{%static '/plantilla/lib/bootstrap/css/bootstrap.css' %}" rel="stylesheet">


{% endblock %}

{%block content%}

<br><br><br>
<div>
    <!--Validacion partida doble-->
    <div class="alert alert-danger alert-dismissible show text-center" role="alert">
        <strong>Advertencia!</strong> No se cumple partida doble. Revisar datos de transaccion.
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>


    <div class="row">
        <div class="col-lg-3 btn-group-vertical text-center">
            <h3 class="h4">Transacciones Especiales</h3>
            <div class="btn-group-vertical">
                <button type="button" class="btn btn-primary">Compra de Inventario</button>
                <button type="button" class="btn btn-info">Venta de Inventario</button>
                <button type="button" class="btn btn-primary">Devoluciones de Inventario</button>
            </div>

        </div>
        <div class="col-lg-9">

            <div class="row jumbotron container-fluid">
                <form method="POST" class="formulario" data-url="/transaccion/">
                    <div class="col-lg-8">

                        {%csrf_token%}
                        <div class="form-group row mr-2 ml-2">

                            <div class="col-sm-10">
                                <input type="text" name="periodo_transaccion" value="{{periodo.id}}" hidden>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Fecha transaccion:</label>
                            <div class="col-sm-10">
                                {{form.fecha_transaccion}}
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label"> Descripcion:</label>

                            <div class="col-sm-10">
                                {{form.descripcion_transaccion}}
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-4 text-center">
                        <br><br>
                        <button type="submit" class="btn btn-success" name="inicio_transaccion" id="1">
                            Iniciar Transaccion
                        </button>
                </form>

            </div>
        </div>

        <div class="row jumbotron container-fluid text-center">
            <div class="row">
                <form action="" method="POST">
                    {%csrf_token%}
                    <div class="col-lg-6">
                        <!-- Boton modal Debe -->
                        <h3>Debe</h3>
                        <input name="transaccion_tc" type="text" id="recibedeb" hidden>
                        <button type="button" class="btn btn-primary" id="btndebe">
                            Agregar Cuentas
                        </button>
                        <br><br>
                        <div id="debe"></div>
                    </div>
                    <button type="submit" id="btn1">Prueba</button>
                </form>

                <form action="POST">
                    <div class="col-lg-6">
                        <!-- Boton modal Haber -->
                        <h3>Haber</h3>
                        <button type="button" class="btn btn-primary" id="btnhaber">
                            Agregar Cuentas
                        </button>
                        <br><br>
                        <input name="transaccion_tc" type="text" id="recibehab" hidden>
                        <div id="haber"></div>
                        <button hidden type="submit" id="btn2">Prueba</button>
                    </div>
                </form>
            </div>
            <div class="row">
                <button type="button" class="btn btn-success" onclick="guardar()">
                    Registrar Transaccion
                </button>
            </div>

        </div>
        <div class="row jumbotron container-fluid text-center">

            <table class="table">
                <h3>Total de la Transaccion</h3>
                <thead class="thead-dark">
                    <tr>

                        <th scope="col">Saldo Debe</th>
                        <th scope="col">Saldo Haber</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>

                        <td id="resultado">Valores</td>
                        <td>Valores</td>

                    </tr>

                </tbody>
            </table>

        </div>
    </div>
</div>
</div>



{%endblock%}

{% block extrajs %}


<script type="text/javascript">

    document.getElementById("btndebe").addEventListener("click", function () {
        var ndiv1, ndiv2, ndiv3;
        ndiv1 = document.createElement("div");
        ndiv2 = document.createElement("div");
        ndiv3 = document.createElement("div");

        ndiv1.setAttribute("class", "form-group row");
        ndiv2.setAttribute("class", "col-lg-7");
        ndiv3.setAttribute("class", "col-lg-5");

        document.getElementById("debe").appendChild(ndiv1);
        ndiv1.appendChild(ndiv2);
        ndiv1.appendChild(ndiv3);

        var nin1, nin2;
        nin1 = document.createElement("select");
        nin2 = document.createElement("input");
        nin3 = document.createElement("input");

        nin1.setAttribute("class", "form-control");
        nin2.setAttribute("class", "form-control");
        nin1.setAttribute("name", "cuenta_tc");
        nin2.setAttribute("name", "debe_tc");
        nin2.setAttribute("type", "number");

        nin3.setAttribute("name", "haber_tc");
        nin3.setAttribute("value", 0);
        nin3.setAttribute("hidden", "hidden");

        nin1.innerHTML = "{%for c in cuentas%} {%ifnotequal c.codigo_padre '12'%}<option>{{c.id}}</option> {%endifnotequal%} {%endfor%}";

        ndiv2.appendChild(nin1);
        ndiv3.appendChild(nin2);
        ndiv3.appendChild(nin3);


    })
    document.getElementById("btnhaber").addEventListener("click", function () {
        var ndiv1, ndiv2, ndiv3;
        ndiv1 = document.createElement("div");
        ndiv2 = document.createElement("div");
        ndiv3 = document.createElement("div");

        ndiv1.setAttribute("class", "form-group row");
        ndiv2.setAttribute("class", "col-lg-7");
        ndiv3.setAttribute("class", "col-lg-5");

        document.getElementById("haber").appendChild(ndiv1);
        ndiv1.appendChild(ndiv2);
        ndiv1.appendChild(ndiv3);

        var nin1, nin2;
        nin1 = document.createElement("select");
        nin2 = document.createElement("input");


        nin1.setAttribute("class", "form-control");
        nin2.setAttribute("class", "form-control");
        nin1.setAttribute("name", "cuenta_tc");
        nin2.setAttribute("name", "haber_tc");
        nin2.setAttribute("type", "number");

        nin1.innerHTML = "{%for c in cuentas%} {%ifnotequal c.codigo_padre '12'%}<option>{{c.nombre_cuenta}}</option> {%endifnotequal%} {%endfor%}";
        ndiv2.appendChild(nin1);
        ndiv3.appendChild(nin2);

    })

</script>
<script type="text/javascript" src="{% static 'js/jquery-3.2.1.min.js' %}"></script>

<script src="{% static 'js/prueba.js'%}"></script>|
{% endblock %}